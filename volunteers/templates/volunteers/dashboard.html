{% extends 'volunteers/base_volunteer.html' %}

{% block title %}Volunteer Dashboard{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="container">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3">
                <div class="sidebar">
                    <h3>Dashboard</h3>
                    <ul class="list-group">
                        <li class="list-group-item"><a href="{% url 'volunteer_dashboard' %}">Home</a></li>
                        <li class="list-group-item"><a href="{% url 'volunteer_profile_edit' %}">Edit Profile</a></li>
                        <li class="list-group-item"><a href="{% url 'complaint_submission' %}">Submit Complaint</a></li>
                        <li class="list-group-item"><a href="{% url 'package_status' %}">Package Status</a></li>
                        <li class="list-group-item"><a href="{% url 'message_inbox' %}">Inbox</a></li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9">
                <div class="dashboard-content">
                    <h2>Welcome, {{ user.first_name }}!</h2>

                    <!-- Shipment Updates -->
                    <div class="section">
                        <h3>Shipment Updates</h3>
                        {% if packages %}
                        <ul class="list-group">
                            {% for package in packages %}
                            <li class="list-group-item">
                                <strong>Tracking Number:</strong> {{ package.tracking_number }}<br>
                                <strong>Status:</strong> {{ package.get_status_display }}<br>
                                <strong>Shipped Date:</strong> {{ package.shipped_date }}<br>
                                <strong>Received Date:</strong> {{ package.received_date|default:"Not Received" }}<br>
                                <strong>Notes:</strong> {{ package.notes|default:"No Notes" }}
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <p>No shipments found.</p>
                        {% endif %}
                    </div>

                    <!-- Inbox -->
                    <div class="section">
                        <h3>Inbox</h3>
                        {% if messages %}
                        <ul class="list-group">
                            {% for message in messages %}
                            <li class="list-group-item">
                                <strong>Subject:</strong> {{ message.subject }}<br>
                                <strong>Date:</strong> {{ message.sent_date }}<br>
                                <strong>Read:</strong> {% if message.is_read %} Yes {% else %} No {% endif %}
                                <p>{{ message.body|truncatewords:20 }}</p>
                                <a href="{% url 'message_detail' message.id %}" class="btn btn-primary">Read More</a>
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <p>No messages found.</p>
                        {% endif %}
                    </div>

                    <!-- Complaints -->
                    <div class="section">
                        <h3>Complaints</h3>
                        {% if complaints %}
                        <ul class="list-group">
                            {% for complaint in complaints %}
                            <li class="list-group-item">
                                <strong>Subject:</strong> {{ complaint.subject }}<br>
                                <strong>Date:</strong> {{ complaint.submitted_date }}<br>
                                <strong>Status:</strong> {{ complaint.get_status_display }}
                                <p>{{ complaint.description|truncatewords:20 }}</p>
                                <a href="{% url 'complaint_detail' complaint.id %}" class="btn btn-primary">View Details</a>
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <p>No complaints found.</p>
                        {% endif %}
                    </div>

                    <!-- Personal Information -->
                    <div class="section">
                        <h3>Personal Information</h3>
                        <ul class="list-unstyled">
                            <li><strong>Full Name:</strong> {{ user.get_full_name }}</li>
                            <li><strong>Email:</strong> {{ user.email }}</li>
                            <li><strong>Phone Number:</strong> {{ user.phone_number }}</li>
                            <li><strong>Address:</strong> {{ user.address }}</li>
                            <li><strong>Country:</strong> {{ user.country }}</li>
                            <li><strong>Passport Number:</strong> {{ user.passport_number }}</li>
                            <li><strong>Organization:</strong> {{ user.organization.name|default:"No Organization" }}</li>
                        </ul>
                    </div>

                    <!-- Organization Details -->
                    <div class="section">
                        <h3>Organization Details</h3>
                        {% if user.organization %}
                        <ul class="list-unstyled">
                            <li><strong>Organization Name:</strong> {{ user.organization.name }}</li>
                            <li><strong>Description:</strong> {{ user.organization.description }}</li>
                        </ul>
                        {% else %}
                        <p>No organization details available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
